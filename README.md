# Обмен книгами в ЦУ

## Описание проекта

Сервис для обмена книгами между студентами и сотрудниками Центрального университета.  
Позволяет публиковать книги для обмена, искать и фильтровать их, отправлять заявки на обмен с выбором места встречи в кампусе, оставлять отзывы и рейтинги, а также вести историю обменов.  
Есть админ-панель для контроля и статистики.

---

## Реализовано (технически):

- **Backend:**  
  - Python 3, Flask  
  - PostgreSQL (через SQLAlchemy)  
  - Alembic/Flask-Migrate (миграции)  
  - Flasgger (Swagger-документация)  
  - Каскадное удаление связанных сущностей  
  - Валидация, обработка ошибок  
  - CRUD для пользователей, книг, обменов, отзывов  
  - Фильтрация и поиск по книгам  
  - Выбор места обмена (9 локаций кампуса)
  - Покрытие тестами (pytest, unit и интеграционные)
  - CI/CD: автозапуск тестов в GitLab CI

- **Frontend:**  
  - React SPA  
  - Современный минималистичный UI (коричнево-кремовая цветовая схема)
  - Подключение к backend через REST API  
  - Фильтрация, поиск, добавление книг  
  - Отзывы и рейтинги  
  - Заявки на обмен (с выбором места)  
  - Просмотр отправленных и входящих заявок  
  - История обменов  
  - Профиль пользователя (книги, отзывы, история)  
  - Админ-панель (статистика, списки пользователей, книг, обменов)
  - Адаптация под роли (админ, обычный пользователь)
  - Toast-уведомления, модальные окна, плавный UX

- **Docker:**  
  - docker-compose для одновременного запуска backend, frontend и БД  
  - Изолированные контейнеры, общая сеть

- **Документация:**  
  - Swagger-страница для тестирования и изучения API

---

## Инструкция по запуску проекта с личного компьютера

**Требования:**
- Docker и docker-compose установлены (https://docs.docker.com/get-docker/)
- Порт 5050 (backend), 3000 (frontend) и 5432 (PostgreSQL) свободны

### 1. Клонируйте репозиторий

```sh
git clone <URL_ВАШЕГО_РЕПОЗИТОРИЯ>
cd <ПАПКА_ПРОЕКТА>
```

### 2. Запустите проект

```sh
docker-compose up --build
```

- Это автоматически поднимет backend (Flask), frontend (React) и базу данных (PostgreSQL).
- Все миграции применяются автоматически при старте backend.

### 3. Откройте сервисы в браузере

- **Frontend:** [http://localhost:3000](http://localhost:3000)
- **Backend API:** [http://localhost:5050](http://localhost:5050)
- **Swagger (API-документация):** [http://localhost:5050/apidocs](http://localhost:5050/apidocs)

### 4. Запуск тестов

```sh
docker-compose exec backend pytest
```

- Все тесты должны пройти без ошибок.

### 5. Остановка сервисов

```sh
docker-compose down
```

---

## Важно!

- Если что-то не работает — проверьте, что Docker и docker-compose установлены и не заняты нужные порты.
- Если при запуске тестов или миграций возникают ошибки — убедитесь, что база данных поднята и доступна.
- Если пайплайн CI падает — смотрите логи в GitLab, чаще всего причина: таймаут, не поднялась БД, не хватает sleep/wait, или ошибка в тестах.

---

**Сервис создан для обмена книгами в Центральном университете. Если возникнут вопросы — пишите!**